<div class= "cart-wrapper">
    <h2>Shopping Cart</h2>

    <table class= "cart-table">
        <tr>
            <th></th>
            <th>Name</th>
            <th>Price</th>
            <th>Quantity</th>
            <th>Edit quantity</th>
        </tr>
        <% current_user.cart.cart_items.each do |cart_item| %>
        <tr>
            <td class="cart_product_img">
                <a href="#"><img src="<%= cart_item.item.image_url %>" alt="Product" class="cart-image"></a>
            </td>
            <td class="cart_product_desc"><h5><%= cart_item.item.title %></h5></td>
            <td class="price"><%= cart_item.item.price %></td>
            <td class="qty"><%= cart_item.quantity %> </td>
            <td class="qty">
                <%= form_with(url: cart_item_path(cart_item), method: :patch) do |form| %>
                <%= form.text_field :quantity, placeholder: "#{cart_item.quantity}" %>
                <%= form.submit %>
                <% end %>
            </td>
            <td class="qty">
                <%= button_to "Remove", cart_item_path(cart_item), :method=>:delete, :remote => true %>
            </td>

        </tr>
        <% end %>
    </table>
    <div class="summary-card">
        <h5>Cart Total</h5>
        <ul>
            <li>Subtotal: $<%= current_user.cart.total_price %></li>
            <li>Delivery: Free</li>
            <li>Total:$<%= current_user.cart.total_price %></li>
        </ul>

        <%=link_to "Aller au paiement", new_charge_path, class:"checkout-button"%>
    </div>
</div>
<!-- ##### Main Content Wrapper End ##### -->
